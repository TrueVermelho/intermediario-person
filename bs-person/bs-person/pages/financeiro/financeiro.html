<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Financeiro - Construção</title>
  <link rel="stylesheet" href="./style-financeiro.css">
</head>

<body>

<!-- MOBILE NAV -->
<div class="mobile-nav">
  <h2>Construtora</h2>
  <button class="menu-btn" onclick="toggleMenu()"><div></div><div></div><div></div></button>
</div>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <h2>Construtora</h2>
  <ul>
    <li><a href="../../index.html" target="_blank">HOME</a></li>
    <li><a href="../dashboard/dashboard.html">Dashboard</a></li>
    <li><a href="../projects/projects.html">Projetos</a></li>
    <li><a href="../clients/clients.html">Clientes</a></li>
    <li><a href="../services/services.html">Serviços</a></li>
    <li><a href="../financeiro/financeiro.html" style="color: #4CAF50;">Financeiro</a></li>
    <li><a href="../configurations/configuration.html">Configurações</a></li>
  </ul>
</aside>

<!-- MAIN -->
<main class="main">
  <div class="topbar">
    <h1>Financeiro</h1>
    <div class="profile">Olá, Usuário</div>
  </div>

  <!-- Resumo -->
  <div class="summary">
    <div class="card">
      <h3>Faturamento Mensal</h3>
      <div id="card-faturamento" class="value">R$ 0,00</div>
    </div>
    <div class="card">
      <h3>Despesas do Mês</h3>
      <div id="card-despesas" class="value">R$ 0,00</div>
    </div>
    <div class="card">
      <h3>Lucro</h3>
      <div id="card-lucro" class="value">R$ 0,00</div>
    </div>
    <div class="card">
      <h3>A Receber</h3>
      <div id="card-areceber" class="value">R$ 0,00</div>
    </div>
  </div>

  <!-- Controles -->
  <div class="controls">
    <button class="btn" onclick="openNewTransaction()">+ Novo Lançamento</button>
    <button class="btn secondary" onclick="exportCSV()">Exportar CSV</button>

    <label>
      De: <input type="date" id="filter-from" onchange="applyFilters()">
    </label>
    <label>
      Até: <input type="date" id="filter-to" onchange="applyFilters()">
    </label>
    <label>
      Tipo:
      <select id="filter-type" onchange="applyFilters()">
        <option value="all">Todos</option>
        <option value="entrada">Entradas</option>
        <option value="saida">Saídas</option>
      </select>
    </label>
    <label>
      Buscar: <input type="text" id="filter-search" placeholder="Descrição ou categoria" oninput="applyFilters()">
    </label>
  </div>

  <!-- Tabela -->
  <div class="table-wrap">
    <table class="finance-table" id="finance-table">
      <thead>
        <tr>
          <th>Descrição</th>
          <th>Tipo</th>
          <th>Categoria</th>
          <th>Valor</th>
          <th>Data</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="finance-tbody">
        <!-- Linhas inseridas via JS -->
      </tbody>
      <tfoot>
        <tr>
          <td colspan="6" class="footer-summary">
            <div>Linhas exibidas: <span id="rows-count">0</span></div>
            <div>Total exibido: <strong id="total-exibido">R$ 0,00</strong></div>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</main>

<!-- Modal Simples para Novo Lançamento -->
<div id="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); align-items:center; justify-content:center; z-index:40;">
  <div style="width:420px; max-width:90%; background:#fff; padding:18px; border-radius:10px;">
    <h3>Novo Lançamento</h3>
    <div style="display:grid; gap:8px; margin-top:12px;">
      <input id="m-desc" type="text" placeholder="Descrição" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
      <select id="m-tipo" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
        <option value="entrada">Entrada</option>
        <option value="saida">Saída</option>
      </select>
      <input id="m-cat" type="text" placeholder="Categoria" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
      <input id="m-valor" type="number" step="0.01" placeholder="Valor (ex: 1500.00)" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
      <input id="m-data" type="date" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
      <select id="m-status" style="padding:8px;border:1px solid #ddd;border-radius:6px;">
        <option value="pago">Pago</option>
        <option value="areceber">A receber</option>
      </select>
      <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:6px;">
        <button class="btn secondary" onclick="closeModal()">Cancelar</button>
        <button class="btn" onclick="saveTransaction()">Salvar</button>
      </div>
    </div>
  </div>
</div>
<script src="./js-financeiro.js"></script>

</body>
</html>
